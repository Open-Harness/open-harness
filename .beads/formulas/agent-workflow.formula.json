{
  "formula": "agent-workflow",
  "description": "Scripts and workflows enabling multi-agent parallel development with beads",
  "version": 1,
  "type": "workflow",
  "steps": [
    {
      "id": "create-bd-work-and-bd-fork-scripts-for-worktree-workflow",
      "title": "Create bd-work and bd-fork scripts for worktree workflow",
      "description": "Create scripts to automate worktree creation with Ghostty integration.\n\n## Scripts to Create\n\n### scripts/bd-work.sh\n- Creates sibling worktree at ../worktrees/\u003cbead\u003e-\u003ccity\u003e\n- Opens new Ghostty tab via AppleScript\n- Sets tab title via OSC escape sequence\n- Runs bun install\n- Launches Claude with --dangerously-skip-permissions and initializer prompt\n- Auto-starts work immediately\n\n### scripts/bd-fork.sh  \n- Forks current worktree to new one\n- Naming: \u003cbead\u003e-\u003ccity\u003e-\u003cn\u003e (e.g., n19-tunis-2)\n- Same Ghostty/Claude automation\n\n### scripts/cities.txt\nHistorical Muslim world cities:\n- Al-Andalus: cordoba, granada, sevilla, toledo, malaga, zaragoza\n- Palestine: quds, gaza, nablus, khalil, jaffa, haifa, akka, ramallah\n- Arabian Peninsula: mecca, medina, jeddah, sanaa, muscat, aden\n- Historic: baghdad, damascus, cairo, fez, marrakech, tunis, kairouan, samarkand, bukhara, isfahan\n\n## Directory Structure\n```\nprojects/open-harness/\n├── open-harness/           # Main repo\n│   └── scripts/\n│       ├── bd-work.sh\n│       ├── bd-fork.sh\n│       └── cities.txt\n└── worktrees/              # All worktrees (sibling dir)\n    ├── n19-granada/\n    └── 1wp-quds/\n```\n\n## Claude Invocation\n```bash\nclaude --dangerously-skip-permissions \"Working on bead: ${BEAD_ID}\n...initializer prompt...\"\n```\n\n## Technical Details\n- Ghostty new tab: AppleScript via System Events\n- Tab title: printf '\\e]0;\u003cname\u003e\\a'\n- Verify claude CLI accepts prompt as argument",
      "type": "task",
      "priority": 1
    },
    {
      "id": "create-auto-merge-github-action-for-low-risk-prs",
      "title": "Create auto-merge GitHub Action for low-risk PRs",
      "type": "task",
      "priority": 2
    }
  ]
}