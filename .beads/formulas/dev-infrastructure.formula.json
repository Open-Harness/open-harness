{
  "formula": "dev-infrastructure",
  "description": "CI/CD, quality gates, and package configuration for the monorepo",
  "version": 1,
  "type": "workflow",
  "steps": [
    {
      "id": "set-up-lefthook-lint-staged-for-pre-commit-hooks",
      "title": "Set up lefthook + lint-staged for pre-commit hooks",
      "description": "Configure pre-commit hooks to catch issues before they're committed.\n\n## Tasks\n- [ ] Install lefthook (or husky - decide which)\n- [ ] Configure lint-staged for staged files only\n- [ ] Pre-commit: biome check --staged\n- [ ] Pre-commit: typecheck (optional - might be slow)\n- [ ] Pre-push: full test suite (optional)\n- [ ] Document in CONTRIBUTING.md\n\n## Notes\n- Must work with bun\n- Should be fast (\u003c5s for lint)\n- Consider biome's --staged flag",
      "type": "task",
      "priority": 1
    },
    {
      "id": "configure-package-json-exports-and-type-definitions",
      "title": "Configure package.json exports and type definitions",
      "description": "Ensure package is properly configured for consumption.\n\n## Tasks\n- [ ] Add exports field with proper subpath exports\n- [ ] Add types field pointing to .d.ts\n- [ ] Add files field to whitelist published files\n- [ ] Add engines field (bun \u003e= 1.x)\n- [ ] Verify types work: tsc --noEmit on consumer\n- [ ] Test: bun link and import in test project\n\n## Example exports structure\n```json\n{\n  \"exports\": {\n    \".\": {\n      \"types\": \"./dist/index.d.ts\",\n      \"import\": \"./dist/index.js\"\n    }\n  }\n}\n```",
      "type": "task",
      "priority": 1
    },
    {
      "id": "set-up-github-actions-ci-cd",
      "title": "Set up GitHub Actions CI/CD",
      "description": "Configure GitHub Actions for automated quality checks.\n\n## Workflows needed\n- [ ] ci.yml - Run on PR and push to dev/master\n  - typecheck (turbo typecheck)\n  - lint (biome check)\n  - test (bun test)\n  - build (turbo build)\n- [ ] release.yml - Publish to npm on tag/release\n\n## Requirements\n- Cache bun dependencies\n- Run on ubuntu-latest\n- Matrix test if needed (bun versions)\n- Status checks required for PR merge",
      "type": "task",
      "priority": 1,
      "depends_on": [
        "set-up-lefthook-lint-staged-for-pre-commit-hooks"
      ]
    },
    {
      "id": "set-up-changesets-for-versioning-and-releases",
      "title": "Set up changesets for versioning and releases",
      "description": "Configure changesets for semantic versioning and changelog generation.\n\n## Tasks\n- [ ] Install @changesets/cli\n- [ ] Initialize changesets config\n- [ ] Add changeset workflow to CI\n- [ ] Document release process\n- [ ] Configure changelog format\n\n## Alternative\nCould use conventional-commits + standard-version instead. Decide which fits better.",
      "type": "task",
      "priority": 2,
      "depends_on": [
        "set-up-github-actions-ci-cd"
      ]
    }
  ]
}