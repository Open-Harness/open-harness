# v0.2.0 RESCUE MAP

**Branch:** `v0.2.0/stabilization`
**Created:** 2026-01-08
**Purpose:** Single source of truth for landing v0.2.0

---

## ğŸ—ºï¸ YOU ARE HERE

```
v0.2.0 Progress
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

INFRASTRUCTURE (Done)
â”œâ”€â”€ Provider Trait âœ… â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
â”œâ”€â”€ Recording System âœ… â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
â”œâ”€â”€ Runtime Engine âœ… â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
â”œâ”€â”€ State Management âœ… â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
â””â”€â”€ Store Adapters âœ… â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%

EVAL SYSTEM (Not Started)
â”œâ”€â”€ Phase 6: Types â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%
â”œâ”€â”€ Phase 7: Engine â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%
â””â”€â”€ Phase 8: Fixtures â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%

DOCUMENTATION (Partial)
â”œâ”€â”€ User Docs Structure âœ… â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
â”œâ”€â”€ User Docs Content â–“â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ ~25%
â””â”€â”€ Internal Docs âœ… â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%

RELEASE PREP (Not Started)
â”œâ”€â”€ Release Announcement â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%
â”œâ”€â”€ Codebase Audit â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%
â””â”€â”€ Final Testing â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
OVERALL: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ ~35% complete
```

---

## ğŸ“ WHAT EXISTS RIGHT NOW

### Code (128 source files, 33 tests)

| Directory | Status | Description |
|-----------|--------|-------------|
| `packages/internal/core/src/providers/` | âœ… Done | ProviderTrait, adapter, context, events |
| `packages/internal/core/src/recording/` | âœ… Done | withRecording, stores, types |
| `packages/internal/core/src/runtime/` | âœ… Done | Compiler, executor, expressions |
| `packages/internal/core/src/state/` | âœ… Done | Snapshot, events, cancellation |
| `packages/stores/recording-store/` | âœ… Done | File, SQLite, testing adapters |
| `packages/stores/run-store/` | âœ… Done | SQLite, testing adapters |
| `packages/internal/core/src/eval/` | âŒ Missing | **THE MAIN WORK** |

### Documentation

| Location | Files | Status |
|----------|-------|--------|
| `apps/docs/content/0.2.0/` | 15 | Structure done, content partial |
| `docs/internal/milestones/v0.2.0/` | 4 | VERSION_PLAN, EVAL_COMPLETION_PLAN, etc. |
| `docs/internal/decisions/` | 2 | PROVIDER_ARCHITECTURE, CLEAN_BREAK_PLAN |
| `docs/internal/templates/` | 1 | VERSION_PLAN_TEMPLATE |
| `docs/internal/archive/` | 8 | Historical planning docs |

---

## ğŸ“‹ COMPLETE TASK LIST

### Phase 6: Eval Types (Week 1)
**Create:** `packages/internal/core/src/eval/`

| Task | File | Lines Est. | Status |
|------|------|-----------|--------|
| 6.1 | `types.ts` | ~200 | â¬œ |
| 6.2 | `dataset.ts` | ~100 | â¬œ |
| 6.3 | `assertions.ts` | ~150 | â¬œ |
| 6.4 | `cache.ts` | ~50 | â¬œ |
| 6.5 | `scorers/index.ts` | ~30 | â¬œ |
| 6.6 | `scorers/latency.ts` | ~30 | â¬œ |
| 6.7 | `scorers/cost.ts` | ~30 | â¬œ |
| 6.8 | `scorers/tokens.ts` | ~30 | â¬œ |
| 6.9 | `scorers/similarity.ts` | ~50 | â¬œ |
| 6.10 | `scorers/llm-judge.ts` | ~80 | â¬œ |
| 6.11 | `index.ts` | ~20 | â¬œ |
| 6.12 | `README.md` | ~100 | â¬œ |
| 6.13 | Add `recording:linked` to state/events.ts | ~20 | â¬œ |

**Tests:** `packages/internal/core/tests/eval/`

| Task | File | Status |
|------|------|--------|
| 6.T1 | `types.test.ts` | â¬œ |
| 6.T2 | `dataset.test.ts` | â¬œ |
| 6.T3 | `assertions.test.ts` | â¬œ |
| 6.T4 | `scorers.test.ts` | â¬œ |

---

### ğŸš§ PHASE 6 QUALITY GATE

**Gate Command (must pass before Phase 7):**
```bash
bun run typecheck && bun run lint && bun run test
```

**Mandatory Quality Checks:**
- [ ] `bun run typecheck` â€” 0 errors
- [ ] `bun run lint` â€” 0 errors
- [ ] `bun run test` â€” 0 failures, no regressions vs baseline

**Meaningful Test Requirements (what tests MUST prove):**

| Test | What It Proves | Why It Matters |
|------|----------------|----------------|
| Load valid dataset JSON | `loadDataset()` parses real JSON without throwing | Can't run evals without loading datasets |
| Reject invalid dataset | Missing required fields throw ValidationError | Catch malformed datasets before runtime |
| Assertion: output.contains | Path resolution finds nested values in artifact | Core assertion logic works |
| Assertion: output.equals | Equality comparison handles edge cases (null, undefined, nested) | Assertions don't silently pass |
| Assertion: metric.latency_ms.max | Extracts latency from agent:complete events | Metric assertions work |
| Assertion: behavior.no_errors | Detects errors in nodeErrors map | Error detection works |
| Scorer: latency returns Score | Pure function input â†’ Score output | Scorers are composable |
| Scorer: cost returns Score | Extracts cost from events | Cost tracking works |
| recording:linked event type | Event compiles and can be emitted | Hybrid model glue exists |

**Phase 6 Exit Criteria (ALL must be true):**
- [ ] Quality gate command passes
- [ ] At least 20 tests covering the cases above
- [ ] Can load a test dataset fixture (committed to repo)
- [ ] Can evaluate assertions against a mock artifact
- [ ] recording:linked event type exists in state/events.ts

**Phase 6 Commit Message Template:**
```
feat(eval): phase 6 complete - types, dataset, assertions, scorers

Quality gate: typecheck âœ“ lint âœ“ tests âœ“ (X tests, 0 failures)

- EvalDataset, EvalCase, EvalVariant, EvalArtifact types
- loadDataset() with validation
- evaluateAssertions() with path resolution
- Scorers: latency, cost, tokens, similarity, llm-judge (stub)
- recording:linked event type added

Co-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>
```

---

### Phase 7: Eval Engine (Week 2-3)
**Create:** Additional files in `packages/internal/core/src/eval/`

| Task | File | Lines Est. | Status |
|------|------|-----------|--------|
| 7.1 | `engine.ts` | ~200 | â¬œ |
| 7.2 | `runner.ts` | ~300 | â¬œ |
| 7.3 | `compare.ts` | ~100 | â¬œ |
| 7.4 | `report.ts` | ~150 | â¬œ |
| 7.5 | `hooks.ts` | ~80 | â¬œ |

**Tests:**

| Task | File | Status |
|------|------|--------|
| 7.T1 | `runner.test.ts` | â¬œ |
| 7.T2 | `compare.test.ts` | â¬œ |
| 7.T3 | `report.test.ts` | â¬œ |
| 7.T4 | `packages/open-harness/core/tests/eval/eval-matrix.test.ts` | â¬œ |

---

### ğŸš§ PHASE 7 QUALITY GATE

**Gate Command (must pass before Phase 8):**
```bash
bun run typecheck && bun run lint && bun run test
```

**Mandatory Quality Checks:**
- [ ] `bun run typecheck` â€” 0 errors
- [ ] `bun run lint` â€” 0 errors
- [ ] `bun run test` â€” 0 failures, no regressions vs Phase 6 baseline

**Meaningful Test Requirements (what tests MUST prove):**

| Test | What It Proves | Why It Matters |
|------|----------------|----------------|
| runCase() executes and returns result | End-to-end case execution works | Core runner functionality |
| runCase() emits recording:linked events | Provider calls are indexed | Hybrid model actually works |
| runMatrix() handles multiple variants | Variant switching works | Can compare providers |
| Deterministic replay test | Same input â†’ same output (run twice, diff results) | Replay is trustworthy |
| compare() finds assertion failures | Baseline comparison detects regressions | CI can catch regressions |
| compare() finds metric regressions | Budget comparison works (latency > max) | Performance tracking works |
| report() generates valid Markdown | Report is human-readable | Results are usable |
| report() generates valid JSON | Report is machine-readable | Automation possible |

**Determinism Verification Test (REQUIRED):**
```typescript
test('deterministic replay', async () => {
  const result1 = await engine.runCase({ dataset, caseId, variant, mode: 'replay' });
  const result2 = await engine.runCase({ dataset, caseId, variant, mode: 'replay' });

  // Must be identical - if not, replay is broken
  expect(result1.assertions).toEqual(result2.assertions);
  expect(result1.metrics).toEqual(result2.metrics);
});
```

**Phase 7 Exit Criteria (ALL must be true):**
- [ ] Quality gate command passes
- [ ] At least 15 new tests (35+ total)
- [ ] Determinism test passes
- [ ] Engine runs against a test fixture (not fabricated - real runtime events)
- [ ] recording:linked events appear in event stream
- [ ] Comparison identifies at least one intentional regression in test

**Phase 7 Commit Message Template:**
```
feat(eval): phase 7 complete - engine, runner, compare, report

Quality gate: typecheck âœ“ lint âœ“ tests âœ“ (X tests, 0 failures)

- createEvalEngine() with full API
- runCase(), runDataset(), runMatrix()
- Deterministic replay verified
- Baseline comparison with regression detection
- Markdown + JSON report generation

Co-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>
```

---

### Phase 8: Fixtures & Landing (Week 4)

| Task | Description | Status |
|------|-------------|--------|
| 8.1 | Create dataset: `coder-reviewer.v1.json` | â¬œ |
| 8.2 | Create fixture directory structure | â¬œ |
| 8.3 | Record goldens (live SDK, one-time) | â¬œ |
| 8.4 | Capture provenance fixtures | â¬œ |
| 8.5 | Create `scripts/eval.ts` | â¬œ |
| 8.6 | Create `scripts/record-eval-goldens.ts` | â¬œ |
| 8.7 | Update `apps/docs/content/0.2.0/03-patterns/evals-pattern.md` | â¬œ |
| 8.8 | Write release announcement draft | â¬œ |
| 8.9 | Run codebase health audit | â¬œ |
| 8.10 | Final test run, verify CI | â¬œ |

---

### ğŸš§ PHASE 8 QUALITY GATE (RELEASE GATE)

**Gate Command (must pass before release):**
```bash
bun run typecheck && bun run lint && bun run test
```

**Mandatory Quality Checks:**
- [ ] `bun run typecheck` â€” 0 errors
- [ ] `bun run lint` â€” 0 errors
- [ ] `bun run test` â€” 0 failures, no regressions vs Phase 7 baseline

**Meaningful Test/Verification Requirements:**

| Verification | What It Proves | Why It Matters |
|--------------|----------------|----------------|
| Real dataset committed | `coder-reviewer.v1.json` exists with 2+ cases | Not fabricated test data |
| Golden recordings committed | `goldens/recording-eval__*.json` files exist | Replay has real data |
| Provenance fixtures committed | `provenance/*.events.json` with recording:linked | Hybrid index works |
| CI eval runs in replay mode | `bun run eval --mode replay` passes | Automated regression detection |
| Docs example compiles | Code blocks in evals-pattern.md are valid TS | Docs aren't stale |
| No stale API references | Grep for old type names returns empty | Docs match code |

**Documentation Verification (REQUIRED):**
```bash
# Verify evals-pattern.md code examples are valid
grep -E "```(typescript|ts)" apps/docs/content/0.2.0/03-patterns/evals-pattern.md

# Verify no references to old/removed types
grep -rE "(OldTypeName|DeprecatedType)" apps/docs/content/0.2.0/
# Should return empty
```

**Phase 8 Exit Criteria (ALL must be true):**
- [ ] Quality gate command passes
- [ ] Real dataset with 2+ cases committed
- [ ] Golden recordings from live SDK committed
- [ ] Provenance fixtures with recording:linked events committed
- [ ] `scripts/eval.ts` runs successfully in replay mode
- [ ] `apps/docs/content/0.2.0/03-patterns/evals-pattern.md` matches implementation
- [ ] Release announcement draft exists
- [ ] Codebase health audit complete (findings documented)

**Phase 8 / Release Commit Message Template:**
```
feat(eval): phase 8 complete - fixtures, scripts, docs - v0.2.0 ready

Quality gate: typecheck âœ“ lint âœ“ tests âœ“ (X tests, 0 failures)

- Real dataset: coder-reviewer.v1.json (N cases)
- Golden recordings from live SDK
- Provenance fixtures with recording:linked
- scripts/eval.ts and record-eval-goldens.ts
- Documentation updated to match implementation

Co-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>
```

---

## ğŸ“š DOCUMENT MAP

```
docs/internal/
â”œâ”€â”€ README.md                              â† How to use docs/internal/
â”‚
â”œâ”€â”€ milestones/v0.2.0/
â”‚   â”œâ”€â”€ RESCUE_MAP.md                      â† YOU ARE HERE
â”‚   â”œâ”€â”€ VERSION_PLAN.md                    â† Vision, scope, release criteria
â”‚   â”œâ”€â”€ EVAL_COMPLETION_PLAN.md            â† Detailed eval implementation spec
â”‚   â””â”€â”€ EVAL_HISTORY_SUMMARY.md            â† Why hybrid model was chosen
â”‚
â”œâ”€â”€ decisions/
â”‚   â”œâ”€â”€ PROVIDER_ARCHITECTURE.md           â† Provider design decisions
â”‚   â””â”€â”€ PROVIDER_CLEAN_BREAK_IMPLEMENTATION_PLAN.md â† Phases 1-5 (done)
â”‚
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ VERSION_PLAN_TEMPLATE.md           â† Copy this for v0.3.0
â”‚
â””â”€â”€ archive/                               â† Historical (not canonical)
    â””â”€â”€ (neverthrow planning, old exploration docs)

apps/docs/content/0.2.0/                   â† User-facing documentation
â”œâ”€â”€ 01-foundations/                        â† Philosophy, zen
â”œâ”€â”€ 02-architecture/                       â† Architecture, providers, telemetry
â”œâ”€â”€ 03-patterns/                           â† Evals, skills, scripts
â”œâ”€â”€ 04-getting-started/                    â† Quickstart, vision, why
â””â”€â”€ 05-reference/                          â† Getting started, contributing
```

---

## ğŸš€ CRITICAL PATH

```
TODAY
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Phase 6: Types  â”‚ â† START HERE
â”‚ (1 week)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Phase 7: Engine â”‚
â”‚ (1.5 weeks)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Phase 8: Land   â”‚
â”‚ (1-2 weeks)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   v0.2.0 SHIP   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Timeline:** ~4 weeks total

---

## âœ… RELEASE CRITERIA

**v0.2.0 ships when ALL checked:**

### Code
- [ ] Eval phases 6-8 complete
- [ ] At least one real dataset in CI (replay mode)
- [ ] Deterministic replay proven
- [ ] All tests green

### Docs
- [ ] `apps/docs/content/0.2.0/` complete
- [ ] Evals pattern doc matches implementation

### Release
- [ ] Release announcement ready
- [ ] CHANGELOG updated
- [ ] PR from dev â†’ master ready

---

## ğŸ”§ QUICK COMMANDS

```bash
# Check build status
bun run typecheck
bun run lint
bun run test

# View current branch
git branch --show-current

# Push to remote
git push -u origin v0.2.0/stabilization
```

---

## ğŸ“ NEXT ACTION

**Start Phase 6:** Create `packages/internal/core/src/eval/types.ts`

See `EVAL_COMPLETION_PLAN.md` for detailed type definitions.
