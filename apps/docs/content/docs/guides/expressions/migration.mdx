---
title: Migration Guide
description: Migrate from template strings to JSONata
---

# Migration Guide

Upgrade your flows from simple template strings to JSONata expressions.

## Why JSONata?

JSONata provides:
- **Rich transformations** — Filter, map, and aggregate data
- **Type safety** — Structured data handling
- **Conditional logic** — Inline branching without extra nodes
- **Built-in functions** — String, math, and date operations

## Simple Replacements

Most basic templates work unchanged:

```yaml
# Before (template string)
prompt: "Hello, ${flow.input.name}!"

# After (JSONata) - same syntax works
prompt: "Hello, {{ flow.input.name }}!"
```

## String Concatenation

```yaml
# Before
prompt: "${flow.input.firstName} ${flow.input.lastName}"

# After - use & operator
prompt: "{{ flow.input.firstName & ' ' & flow.input.lastName }}"
```

## Nested Access

```yaml
# Before
value: "${nodes.api.output.data.items[0].name}"

# After - same syntax
value: "{{ api.data.items[0].name }}"
```

## Conditional Values

```yaml
# Before (required separate node)
# Now inline:
prompt: |
  {{
    flow.input.urgent
      ? "URGENT: " & flow.input.message
      : flow.input.message
  }}
```

## Array Operations

```yaml
# Before (manual iteration)
# Now with JSONata:
activeUsers: "{{ flow.input.users[status = 'active'] }}"
names: "{{ flow.input.users.name }}"
total: "{{ $sum(flow.input.items.price) }}"
```

## Common Patterns

| Old Pattern | JSONata Equivalent |
|-------------|-------------------|
| `${a} ${b}` | `{{ a & ' ' & b }}` |
| `${obj.arr[0]}` | `{{ obj.arr[0] }}` |
| `${value \|\| 'default'}` | `{{ value ? value : 'default' }}` |
| `${arr.map(x => x.id)}` | `{{ arr.id }}` |
| `${arr.filter(x => x.ok)}` | `{{ arr[ok = true] }}` |

## Next Steps

- [Data Bindings](/docs/guides/expressions/bindings) — Complete binding reference
- [JSONata Syntax](/docs/reference/expressions/syntax) — Full syntax documentation
