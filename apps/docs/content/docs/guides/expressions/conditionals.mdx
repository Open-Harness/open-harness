---
title: Conditional Expressions
description: Control flow execution with JSONata conditions
---

# Conditional Expressions

Use JSONata expressions to decide when nodes and edges should run.

## Edge Conditions

Add `when` to edges for branching logic:

```yaml
nodes:
  - id: classify
    type: task.triage
    input:
      text: "{{ flow.input.text }}"

  - id: handle-urgent
    type: echo
    input:
      text: "URGENT: {{ classify.summary }}"

  - id: handle-normal
    type: echo
    input:
      text: "Next: {{ classify.summary }}"

edges:
  - from: classify
    to: handle-urgent
    when: "classify.priority = 'urgent'"

  - from: classify
    to: handle-normal
    when: "classify.priority = 'normal'"
```

## Node Conditions

Skip a node entirely unless a condition passes:

```yaml
nodes:
  - id: audit
    type: echo
    when: "state.runs > 10"
    input:
      text: "High volume run detected"
```

## Boolean and Comparison Operators

```yaml
# Equality
when: "flow.input.plan = 'pro'"

# Numeric comparison
when: "score >= 0.85"

# Boolean logic
when: "flow.input.urgent and flow.input.priority > 5"

# Existence check
when: "$exists(flow.input.owner)"
```

## Error Handling and Safeguards

A common pattern is to skip downstream nodes when a previous node failed:

```yaml
when: "$not(classify.error)"
```

## Edge Cases

- **Missing paths**: JSONata returns `undefined`. Compare with `$exists()` when
  a field may be missing.
- **Strings**: Use single quotes inside expressions: `status = 'ok'`.
- **Equality**: JSONata uses `=` (not `==`).

## Next Steps

- [Iteration](/docs/guides/expressions/iteration) — Loop over arrays
- [JSONata Functions](/docs/reference/expressions/functions) — Built-in functions
