---
title: How to Use the GitHub Channel
description: Stream flow execution to GitHub Issues or PRs
---

# How to Use the GitHub Channel

The GitHub channel renders flow execution as a live-updating comment on a GitHub Issue or Pull Request.

## Installation

```bash
bun add @open-harness/github-channel
```

## Basic Setup

```typescript
import { createFlowRunner } from "@open-harness/kernel";
import { createGithubChannel } from "@open-harness/github-channel";

const runner = createFlowRunner(flow, registry);

runner.attach(createGithubChannel({
  repo: "my-org/my-repo",
  issueNumber: 123,
  tokenEnv: "GITHUB_TOKEN",
}));

await runner.run();
```

## Configuration Options

```typescript
createGithubChannel({
  // Required
  repo: string;            // "owner/repo" format
  tokenEnv: string;        // Env var name for GitHub token

  // Target (exactly one required)
  issueNumber?: number;    // Post to Issue
  prNumber?: number;       // Post to PR

  // Optional
  debounceMs?: number;     // Update throttle (default: 3000)
  maxRecent?: number;      // Max events shown (default: 50)
  pollIntervalMs?: number; // Input polling (default: 5000, 0 to disable)
  allowCommands?: string[];// Allowed slash commands
  mentions?: string[];     // Users to @mention
  logLevel?: string;       // pino log level
});
```

## Environment

Set your GitHub token:

```bash
export GITHUB_TOKEN=ghp_your_token_here
```

The token needs `issues:write` or `pull_requests:write` scope.

## What It Renders

The channel creates a comment that shows:

### Run Status
```
## Flow Run

**Status:** ðŸŸ¢ Running
**Session:** abc-123
```

### Phase Progress
```
### Phase 1: Research âœ“

- âœ“ fetch-data (2.3s)
- âœ“ validate (0.8s)

### Phase 2: Analysis â–¶

- â–¶ analyze-trends (running...)
- â—‹ generate-report (pending)
```

### Recent Events
```
**Recent Activity:**
- 12:34:56 | task:complete | fetch-data completed
- 12:34:58 | agent:text | "Analyzing the data..."
```

### Prompts (Human-in-the-Loop)

When the flow needs input:

```
### ðŸ”” Input Required

**Which approach should I use?**

Reply with:
- `/choose 1` - Use Zod validation
- `/choose 2` - Use manual validation
- `/reply your text` - Free-form response
```

## Bidirectional Communication

The channel polls for comments and can respond to commands:

### Slash Commands

Users can reply with slash commands:

```
/abort          - Stop the flow
/choose 1       - Select option 1
/reply <text>   - Free-form response
```

Enable commands in config:

```typescript
createGithubChannel({
  // ...
  allowCommands: ["abort", "choose", "reply"],
  pollIntervalMs: 5000, // Check every 5s
});
```

### Receiving Responses

When a user replies, the channel emits events to the Hub:

```typescript
// User posts: "/choose 1"
// Channel emits:
hub.reply(promptId, {
  content: "1",
  choice: "1",
  timestamp: new Date()
});
```

## Output to PR vs Issue

For Pull Requests:

```typescript
createGithubChannel({
  repo: "my-org/my-repo",
  prNumber: 456,  // Use PR number instead of issueNumber
  tokenEnv: "GITHUB_TOKEN",
});
```

## Debouncing

Updates are debounced to avoid rate limiting:

```typescript
createGithubChannel({
  // ...
  debounceMs: 3000, // Wait 3s between updates
});
```

With rapid events, intermediate states are batched.

## Error Handling

The channel emits `channel:error` events on failures:

```typescript
hub.subscribe("channel:error", (event) => {
  console.error("GitHub channel error:", event.event.message);
});
```

Common errors:
- Missing token in environment
- Invalid repository format
- Rate limiting (429 errors)
- Permissions issues

## With Console Channel

Combine multiple channels:

```typescript
import { ConsoleChannel } from "@open-harness/kernel";

runner.attach(ConsoleChannel());      // Terminal output
runner.attach(createGithubChannel({   // GitHub output
  repo: "my-org/my-repo",
  issueNumber: 123,
  tokenEnv: "GITHUB_TOKEN",
}));
```

Both receive the same events independently.

## Related

- [GitHub Channel Reference](/docs/reference/channels/github) - Full API reference
- [Attach Channel](/docs/guides/channels/attach-channel) - Channel basics
- [Bidirectional I/O](/docs/guides/channels/bidirectional-io) - Two-way communication
