---
title: Custom Channels
description: Build channels for any I/O interface
---

# Custom Channels

Create channels to connect any external system to the Hub.

## Channel Interface

```typescript
interface ChannelDefinition {
  name: string;
  on?: Record<string, EventHandler>;
  onStart?: (ctx: ChannelContext) => Promise<void>;
  onStop?: (ctx: ChannelContext) => Promise<void>;
}
```

## Basic Channel

```typescript
const loggingChannel = {
  name: "logger",
  on: {
    "*": ({ event }) => {
      console.log(`[${event.type}]`, JSON.stringify(event));
    }
  }
};

hub.registerChannel(loggingChannel);
```

## Bidirectional Channel

Channels can both observe events and send commands:

```typescript
const slackChannel = {
  name: "slack",

  on: {
    "agent:complete": async ({ event, hub }) => {
      await postToSlack(event.output);
    },
    "slack:message": async ({ event, hub }) => {
      // Forward Slack message to running agent
      hub.sendToRun(event.runId, {
        type: "user_message",
        content: event.text
      });
    }
  },

  async onStart({ hub }) {
    // Start listening to Slack
    slackClient.on("message", (msg) => {
      hub.emit({
        type: "slack:message",
        text: msg.text,
        runId: msg.threadTs
      });
    });
  }
};
```

## Lifecycle Hooks

```typescript
const channel = {
  name: "database",

  async onStart({ hub }) {
    await this.db.connect();
    console.log("Database connected");
  },

  async onStop({ hub }) {
    await this.db.disconnect();
    console.log("Database disconnected");
  }
};
```

## Next Steps

- [WebSocket Channel](/docs/guides/channels/websocket) — Built-in WebSocket support
- [Channel API](/docs/reference/api/channel) — Full interface reference
