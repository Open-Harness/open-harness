---
title: How to Debug Flows
description: Diagnose and fix flow execution issues
---

# How to Debug Flows

Systematic approach to debugging flow problems.

## Enable Verbose Logging

```bash
LOG_LEVEL=debug bun run my-flow.ts
```

## Subscribe to All Events

```typescript
const hub = createHub();

hub.subscribe("*", (event) => {
  console.log(
    `[${event.timestamp}] [${event.event.type}]`,
    JSON.stringify(event.event, null, 2)
  );
});
```

## Inspect Node Inputs/Outputs

```typescript
hub.subscribe("task:start", (event) => {
  console.log(`\n=== ${event.event.taskId} START ===`);
  console.log("Input:", event.event.input);
});

hub.subscribe("task:complete", (event) => {
  console.log(`\n=== ${event.event.taskId} COMPLETE ===`);
  console.log("Output:", event.event.result);
});

hub.subscribe("task:failed", (event) => {
  console.log(`\n=== ${event.event.taskId} FAILED ===`);
  console.error("Error:", event.event.error);
});
```

## Check Edge Resolution

```typescript
import { validateFlowYaml } from "@open-harness/kernel";

const validation = validateFlowYaml(flow);

if (!validation.valid) {
  console.error("Flow validation errors:");
  for (const error of validation.errors) {
    console.error(`  - [${error.code}] ${error.message}`);
    console.error(`    Path: ${error.path}`);
  }
}
```

## Validate Before Running

```typescript
import { parseFlowYaml, validateFlowYaml, executeFlow } from "@open-harness/kernel";

const flow = parseFlowYaml(yaml);

const validation = validateFlowYaml(flow);
if (!validation.valid) {
  console.error("Invalid flow:", validation.errors);
  process.exit(1);
}

// Now safe to execute
const result = await executeFlow(flow, { input, registry, hub });
```

## Debug Binding Resolution

```typescript
hub.subscribe("binding:resolve", (event) => {
  console.log("Resolving:", event.event.path);
  console.log("Value:", event.event.value);
});

hub.subscribe("binding:error", (event) => {
  console.error("Binding failed:", event.event.path);
  console.error("Reason:", event.event.reason);
});
```

## Trace Execution Flow

```typescript
const trace: string[] = [];

hub.subscribe("task:start", (e) => {
  trace.push(`START: ${e.event.taskId}`);
});

hub.subscribe("task:complete", (e) => {
  trace.push(`COMPLETE: ${e.event.taskId}`);
});

hub.subscribe("task:skipped", (e) => {
  trace.push(`SKIPPED: ${e.event.taskId} (${e.event.reason})`);
});

// After execution
console.log("Execution trace:", trace.join("\n"));
```

## Common Issues

| Issue | Cause | Fix |
|-------|-------|-----|
| Node never runs | Missing edge | Add edge from dependency |
| Binding undefined | Wrong path | Check output structure |
| Type mismatch | Schema mismatch | Align schemas |
| Timeout | Long operation | Increase timeout or optimize |

## Related

- [Inspect Events](/docs/guides/debugging/inspect-events) - Event inspection
- [Common Errors](/docs/guides/debugging/common-errors) - Error reference
- [Binding Resolution](/docs/guides/debugging/binding-resolution) - A3 debugging
