---
title: A3 Binding Syntax
description: Complete reference for the A3 binding expression syntax
---

# A3 Binding Syntax

A3 is the binding expression syntax used in Open Harness flows to reference values from flow input and node outputs.

## Basic Syntax

```
{{path.to.value}}
```

Bindings are delimited by double curly braces `{{ }}` and contain a dot-notation path.

## Path Resolution

### Flow Input

Reference flow input values:

```yaml
flow:
  name: example
  input:
    greeting: "Hello"
    user:
      name: "Alice"

nodes:
  - id: step1
    type: echo
    input:
      message: "{{flow.input.greeting}}"  # "Hello"
      name: "{{flow.input.user.name}}"    # "Alice"
```

### Node Output

Reference output from previous nodes:

```yaml
nodes:
  - id: fetch
    type: http
    input:
      url: "https://api.example.com/data"

  - id: process
    type: transform
    input:
      data: "{{fetch.output}}"           # Entire output
      count: "{{fetch.output.count}}"    # Specific field
      first: "{{fetch.output.items.0}}"  # Array index
```

### Nested Paths

Paths can traverse deeply nested structures:

```
{{flow.input.config.options.feature.enabled}}
{{step1.output.data.users.0.profile.email}}
```

## String Interpolation

Multiple bindings in a single string:

```yaml
input:
  url: "https://{{flow.input.host}}/api/v{{flow.input.version}}/users"
  message: "Hello {{flow.input.firstName}} {{flow.input.lastName}}!"
```

## Optional Bindings

Prefix with `?` to return empty string if path not found:

```yaml
input:
  # Empty string if flow.input.optional doesn't exist
  value: "{{?flow.input.optional}}"

  # Works in interpolation too
  message: "Debug: {{?flow.input.debug}}"
```

## Default Values

Use `| default:` to specify a fallback value:

```yaml
input:
  # String default
  name: "{{flow.input.name | default:\"Guest\"}}"

  # Number default
  count: "{{flow.input.count | default:0}}"

  # Boolean default
  enabled: "{{flow.input.enabled | default:true}}"

  # Object default
  config: "{{flow.input.config | default:{}}}"

  # Array default
  items: "{{flow.input.items | default:[]}}"
```

Default values must be valid JSON literals.

## Combined Modifiers

Optional and default can be combined:

```yaml
input:
  # First tries optional, then default
  value: "{{?flow.input.value | default:\"fallback\"}}"
```

## Resolution Order

1. Parse binding expression
2. Check for optional (`?`) prefix
3. Resolve path against context
4. If not found:
   - If optional: return empty string
   - If default specified: return default
   - Otherwise: throw error
5. Convert value to string (for interpolation)

## Context Structure

The binding context contains:

```typescript
{
  flow: {
    input: { /* flow input values */ }
  },
  nodeId1: { /* node 1 output */ },
  nodeId2: { /* node 2 output */ },
  // ... more node outputs
}
```

## Examples

### API Call with Bindings

```yaml
flow:
  name: api-example
  input:
    baseUrl: "https://api.example.com"
    token: "abc123"
    userId: "42"

nodes:
  - id: fetch_user
    type: http
    input:
      url: "{{flow.input.baseUrl}}/users/{{flow.input.userId}}"
      headers:
        Authorization: "Bearer {{flow.input.token}}"

  - id: format_response
    type: template
    input:
      template: "User {{fetch_user.output.name}} ({{fetch_user.output.email}})"
```

### Conditional with Bindings

```yaml
nodes:
  - id: check
    type: validate
    input:
      data: "{{flow.input.data}}"

  - id: process
    type: transform
    input:
      value: "{{check.output.validated}}"
    when:
      equals:
        var: check.output.valid
        value: true
```

### Array Processing

```yaml
nodes:
  - id: fetch_items
    type: http
    input:
      url: "{{flow.input.apiUrl}}/items"

  - id: first_item
    type: extract
    input:
      item: "{{fetch_items.output.items.0}}"

  - id: item_name
    type: extract
    input:
      name: "{{fetch_items.output.items.0.name}}"
```

## Grammar

```
binding     := "{{" modifiers? path default? "}}"
modifiers   := "?"
path        := segment ("." segment)*
segment     := identifier | index
identifier  := [A-Za-z_][A-Za-z0-9_]*
index       := [0-9]+
default     := "|" "default:" json_literal
json_literal := string | number | boolean | null | object | array
```

## See Also

- [resolveBindings](/reference/api/resolve-bindings) - Resolution API
- [Binding Errors](/reference/bindings/binding-errors) - Error handling
- [Bindings Spec](/reference/kernel-spec/flow/bindings) - Specification
