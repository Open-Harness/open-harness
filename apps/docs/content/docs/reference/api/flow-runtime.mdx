---
title: Runtime Execution
description: Snapshots, commands, and resume behavior
---

# Runtime Execution

The runtime exposes snapshots, commands, and resume options for advanced usage.

## RunSnapshot

The snapshot captures current execution state:

```typescript
type RunSnapshot = {
  runId?: string;
  status: "idle" | "running" | "paused" | "aborted" | "complete";
  outputs: Record<string, unknown>;
  state: Record<string, unknown>;
  nodeStatus: Record<string, "pending" | "running" | "done" | "failed">;
  edgeStatus: Record<string, "pending" | "fired" | "skipped">;
  loopCounters: Record<string, number>;
  inbox: RuntimeCommand[];
  agentSessions: Record<string, string>;
};
```

## RuntimeCommand

Commands can be dispatched while a run is active:

```typescript
type RuntimeCommand =
  | { type: "send"; message: string; runId: string }
  | { type: "reply"; promptId: string; content: string; runId: string }
  | { type: "abort"; resumable?: boolean; reason?: string }
  | { type: "resume"; message?: string };
```

Dispatch example:

```typescript
runtime.dispatch({ type: "send", runId: "run-123", message: "continue" });
```

## Resume Options

Resume a run from a stored snapshot or run id:

```typescript
const runtime = createRuntime({
  flow,
  registry,
  store,
  resume: { runId: "run-123" },
});
```

Or resume from an in-memory snapshot:

```typescript
const runtime = createRuntime({
  flow,
  registry,
  resume: { snapshot: previousSnapshot },
});
```

## Runtime Status

Runtime status values:

- `idle`: Ready to execute
- `running`: Actively executing
- `paused`: Paused by a resumable abort
- `aborted`: Aborted without resume
- `complete`: Finished execution

## See Also

- [Runtime API](/docs/reference/api/runtime) — createRuntime and core methods
- [Run Store](/docs/reference/api/run-store) — Persistence hooks
