---
title: Run Store
description: Persistence interface for runtime events and snapshots
---

# Run Store

`RunStore` persists runtime events and snapshots.

## Interface

```typescript
import type { RunSnapshot } from "@open-harness/core";
import type { RuntimeEvent } from "@open-harness/core";

interface RunStore {
  appendEvent(runId: string, event: RuntimeEvent): void;
  saveSnapshot(runId: string, snapshot: RunSnapshot): void;
  loadSnapshot(runId: string): RunSnapshot | null;
  loadEvents(runId: string, afterSeq?: number): RuntimeEvent[];
}
```

## Built-in Stores

### InMemoryRunStore

```typescript
import { InMemoryRunStore } from "@open-harness/core";

const store = new InMemoryRunStore();
```

### SqliteRunStore

```typescript
import { SqliteRunStore } from "@open-harness/run-store-sqlite";

const store = new SqliteRunStore({ filename: "./data/runs.db" });
```

## Custom Store

```typescript
class PostgresRunStore implements RunStore {
  appendEvent(runId: string, event: RuntimeEvent): void {
    // Persist event with an incrementing sequence
  }

  saveSnapshot(runId: string, snapshot: RunSnapshot): void {
    // Persist latest snapshot
  }

  loadSnapshot(runId: string): RunSnapshot | null {
    return null;
  }

  loadEvents(runId: string, afterSeq: number = 0): RuntimeEvent[] {
    return [];
  }
}
```

## Usage with Runtime

```typescript
const runtime = createRuntime({ flow, registry, store });
```

## See Also

- [Persistence Guide](/docs/guides/deployment/persistence) — Configuration guide
- [Runtime API](/docs/reference/api/runtime) — createRuntime usage
