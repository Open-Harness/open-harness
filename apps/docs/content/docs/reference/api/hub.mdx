---
title: Hub
description: Central event bus and coordination API
---

# Hub

The Hub is the central nervous system of your flow runtime.

## Creating a Hub

```typescript
import { createHub } from "@open-harness/sdk";

const hub = createHub("session-123", {
  store: sqliteStore,
  registry: nodeRegistry,
});
```

## Methods

### `start()`

Start the hub and all registered channels.

```typescript
await hub.start();
```

### `stop()`

Gracefully stop the hub.

```typescript
await hub.stop();
```

### `emit(event)`

Emit an event to all subscribers.

```typescript
hub.emit({
  type: "custom:event",
  data: { message: "Hello" },
});
```

### `subscribe(type, handler)`

Subscribe to events by type. Returns unsubscribe function.

```typescript
const unsubscribe = hub.subscribe("agent:text", (event) => {
  console.log(event.event.content);
});

// Later
unsubscribe();
```

### `registerChannel(channel)`

Register a channel for bidirectional communication.

```typescript
hub.registerChannel(wsChannel);
```

### `startFlow(flowId, input)`

Start a flow execution.

```typescript
const runId = await hub.startFlow("my-flow", {
  name: "World",
});
```

### `sendToRun(runId, message)`

Send a message to a running flow.

```typescript
hub.sendToRun(runId, {
  type: "user_message",
  content: "Continue with that",
});
```

## Properties

| Property | Type | Description |
|----------|------|-------------|
| `sessionId` | `string` | Unique session identifier |
| `store` | `RunStore` | Persistence layer |
| `registry` | `NodeRegistry` | Registered node types |

## See Also

- [Events API](/docs/reference/api/events) — Event types
- [Channel API](/docs/reference/api/channel) — Channel interface
