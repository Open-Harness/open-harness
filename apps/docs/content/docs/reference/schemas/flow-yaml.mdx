---
title: Flow YAML Schema
description: Complete YAML schema for flow definitions
---

# Flow YAML Schema

Complete reference for flow.yaml files.

## Full Schema

```yaml
# Required: Unique flow identifier
id: my-flow

# Optional: Human-readable name
name: My Flow

# Optional: Description
description: What this flow does

# Required: Array of nodes
nodes:
  - id: node-id           # Required: Unique within flow
    type: node-type       # Required: Registered node type
    input:                # Optional: Input bindings
      key: value
      key2: "{{ expression }}"
    config:               # Optional: Node configuration
      option: value

# Optional: Explicit edges
edges:
  - from: source-node     # Required: Source node ID
    to: target-node       # Required: Target node ID
    condition: "{{ expr }}" # Optional: JSONata condition
```

## Minimal Example

```yaml
id: hello
nodes:
  - id: greet
    type: claude.agent
    input:
      prompt: "Say hello"
```

## Complete Example

```yaml
id: code-review
name: Code Review Pipeline
description: Analyzes and reviews code changes

nodes:
  - id: analyze
    type: claude.agent
    input:
      prompt: "Analyze this code for issues"
      code: "{{ flow.input.code }}"
    config:
      model: claude-sonnet-4-20250514
      maxTokens: 4096

  - id: security-check
    type: claude.agent
    input:
      prompt: "Check for security vulnerabilities"
      code: "{{ flow.input.code }}"

  - id: summarize
    type: claude.agent
    input:
      analysis: "{{ nodes.analyze.output.text }}"
      security: "{{ nodes.security-check.output.text }}"
      prompt: "Summarize the review findings"

edges:
  - from: analyze
    to: summarize
  - from: security-check
    to: summarize
```

## Node Types

### claude.agent

```yaml
- id: assistant
  type: claude.agent
  input:
    prompt: string          # Required
    system: string          # Optional
  config:
    model: string           # Default: claude-sonnet-4-20250514
    maxTokens: number       # Default: 4096
    temperature: number     # Default: 1.0
```

### http.get / http.post

```yaml
- id: fetch
  type: http.get
  input:
    url: string             # Required
    headers: object         # Optional
  config:
    timeout: number         # Optional
```

### map

```yaml
- id: process-each
  type: map
  input:
    items: array            # Required
    node: string            # Node ID to run for each
```

### delay

```yaml
- id: wait
  type: delay
  input:
    ms: number              # Milliseconds to wait
```

## Expression Syntax

All string values support JSONata expressions:

```yaml
# Simple reference
prompt: "{{ flow.input.message }}"

# Node output
data: "{{ nodes.fetch.output.body }}"

# Transformation
name: "{{ flow.input.first & ' ' & flow.input.last }}"

# Conditional
value: "{{ flow.input.x > 0 ? 'positive' : 'negative' }}"
```

## See Also

- [FlowDefinition](/docs/reference/types/flow-definition) — TypeScript type
- [JSONata Syntax](/docs/reference/expressions/syntax) — Expression reference
