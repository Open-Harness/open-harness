---
title: Getting Started with Flow-UI
description: Set up the visual flow editor in your project
---

# Getting Started

This guide walks you through integrating Flow-UI into your Open Harness project.

## Prerequisites

- Node.js 18+ or Bun
- React 18+
- An Open Harness kernel setup

## Installation

```bash
bun add @open-harness/flow-ui @xyflow/react
```

## Basic Setup

### 1. Create the Editor Component

```tsx
// FlowEditor.tsx
import {
  FlowCanvas,
  NodePalette,
  Toolbar,
  EventLog,
  ConnectionStatus,
  useFlowState,
  useWebSocket,
  type NodeTypeMetadata,
} from "@open-harness/flow-ui";
import { useEffect, useState } from "react";

// Define available node types
const nodeTypes: NodeTypeMetadata[] = [
  {
    type: "prompt",
    metadata: {
      displayName: "Prompt",
      description: "User input prompt",
      category: "core",
      icon: "ðŸ’¬",
    },
  },
  {
    type: "agent",
    metadata: {
      displayName: "Agent",
      description: "LLM agent node",
      category: "agents",
      icon: "ðŸ¤–",
    },
  },
  {
    type: "condition",
    metadata: {
      displayName: "Condition",
      description: "Conditional branching",
      category: "flow",
      icon: "ðŸ”€",
    },
  },
];

export function FlowEditor() {
  const [events, setEvents] = useState<HubEvent[]>([]);
  const [isRunning, setIsRunning] = useState(false);

  // Flow state management
  const {
    nodes,
    edges,
    onNodesChange,
    onEdgesChange,
    onConnect,
    addNode,
    setNodeExecutionState,
    exportFlow,
    clearFlow,
  } = useFlowState();

  // WebSocket connection
  const { status, sendCommand, subscribe } = useWebSocket("ws://localhost:3001", {
    reconnect: true,
  });

  // Subscribe to hub events
  useEffect(() => {
    const unsubscribe = subscribe((event) => {
      setEvents((prev) => [...prev.slice(-99), event]);

      // Update node execution states
      if (event.type === "node:start") {
        setNodeExecutionState(event.event.nodeId, "running");
      } else if (event.type === "node:complete") {
        setNodeExecutionState(event.event.nodeId, "complete");
      } else if (event.type === "node:error") {
        setNodeExecutionState(event.event.nodeId, "error");
      } else if (event.type === "flow:complete") {
        setIsRunning(false);
      }
    });
    return unsubscribe;
  }, [subscribe, setNodeExecutionState]);

  const handleRun = () => {
    const flow = exportFlow();
    setEvents([]);
    setIsRunning(true);
    sendCommand({ type: "execute", flow });
  };

  const handleStop = () => {
    sendCommand({ type: "abort" });
    setIsRunning(false);
  };

  return (
    <div className="flow-editor">
      <header className="flow-header">
        <Toolbar
          onRun={handleRun}
          onStop={handleStop}
          onClear={clearFlow}
          isRunning={isRunning}
        />
        <ConnectionStatus status={status} />
      </header>

      <div className="flow-main">
        <aside className="flow-sidebar">
          <NodePalette nodeTypes={nodeTypes} />
        </aside>

        <main className="flow-canvas">
          <FlowCanvas
            nodes={nodes}
            edges={edges}
            onNodesChange={onNodesChange}
            onEdgesChange={onEdgesChange}
            onConnect={onConnect}
            onNodeDrop={(nodeType, position) => addNode(nodeType, position)}
          />
        </main>

        <aside className="flow-events">
          <EventLog events={events} maxEvents={50} />
        </aside>
      </div>
    </div>
  );
}
```

### 2. Add Styles

```css
/* flow-editor.css */
.flow-editor {
  display: flex;
  flex-direction: column;
  height: 100vh;
}

.flow-header {
  display: flex;
  justify-content: space-between;
  padding: 1rem;
  border-bottom: 1px solid #e5e7eb;
}

.flow-main {
  display: flex;
  flex: 1;
  overflow: hidden;
}

.flow-sidebar {
  width: 250px;
  border-right: 1px solid #e5e7eb;
  overflow-y: auto;
}

.flow-canvas {
  flex: 1;
}

.flow-events {
  width: 300px;
  border-left: 1px solid #e5e7eb;
  overflow-y: auto;
}
```

### 3. Set Up the Server

```typescript
// server.ts
import { HubImpl, NodeRegistry, executeFlow } from "@open-harness/kernel";

const registry = new NodeRegistry();
// ... register your node types

// Simple WebSocket server using Bun
const server = Bun.serve({
  port: 3001,
  fetch(req, server) {
    // Upgrade to WebSocket
    if (server.upgrade(req)) {
      return; // Upgraded
    }
    return new Response("WebSocket server", { status: 200 });
  },
  websocket: {
    open(ws) {
      console.log("Client connected");
    },
    async message(ws, message) {
      const data = JSON.parse(message.toString());

      if (data.type === "execute") {
        const hub = new HubImpl("flow-ui-session");

        // Forward all events to the UI
        hub.subscribe("*", (event) => {
          ws.send(JSON.stringify(event));
        });

        // Create context
        const ctx = {
          hub,
          phase: async <T>(name: string, fn: () => Promise<T>) => fn(),
          task: async <T>(id: string, fn: () => Promise<T>) => fn(),
        };

        // Execute the flow
        await executeFlow(data.flow, registry, ctx);
      }
    },
    close(ws) {
      console.log("Client disconnected");
    },
  },
});

console.log("Flow server running on ws://localhost:3001");
```

### 4. Run Both

```bash
# Terminal 1: Start the server
bun run server.ts

# Terminal 2: Start the React app
bun dev
```

## Next Steps

- [Components Reference](/docs/reference/flow-ui/components) â€” All component props and usage
- [Hooks Reference](/docs/reference/flow-ui/hooks) â€” State management and WebSocket hooks
- [Custom Nodes](/docs/learn/custom-node) â€” Build your own node types
