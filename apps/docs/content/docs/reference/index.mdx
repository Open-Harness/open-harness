---
title: Reference
description: Complete API reference for Open Harness v0.3.0
---

# Reference Documentation

Complete technical reference for Open Harness â€” APIs, types, and signals.

## Core API

The primary functions for building reactive agent workflows:

| Function | Description |
|----------|-------------|
| `createHarness<TState>()` | Factory returning typed `agent()` and `runReactive()` |
| `agent(config)` | Define a reactive agent with `activateOn`, `emits`, `when` |
| `runReactive(config)` | Execute a signal-based workflow |

## Providers

Adapters that connect to AI model APIs:

- [ClaudeProvider](/docs/guides/agents/claude-agent) - Anthropic Claude models
- CodexProvider - OpenAI Codex models (coming soon)

## Signal Types

Signals emitted during workflow execution:

| Category | Signals |
|----------|---------|
| Harness | `harness:start`, `harness:end` |
| Agent | `agent:activated`, `agent:skipped`, `agent:completed` |
| Provider | `provider:start`, `provider:end`, `provider:error` |
| Text | `text:delta`, `text:complete` |
| State | `state:{key}:changed` |
| Custom | Any signal name via `emits` |

## API Pages

Detailed reference for runtime components:

- [Runtime](/docs/reference/api/runtime) - Core runtime execution
- [Events](/docs/reference/api/events) - Signal system reference
- [Transport](/docs/reference/api/transport) - Message passing

## Type Definitions

TypeScript types for the signal architecture:

- [Runtime Event](/docs/reference/types/runtime-event) - Signal event structure

## Agent Configuration

```typescript
agent({
  // Required
  prompt: string,           // Template with {{ state.x }} syntax
  activateOn: string[],     // Signal patterns to react to

  // Optional
  emits?: string[],         // Signals this agent emits
  when?: (ctx) => boolean,  // Guard condition
  updates?: keyof TState,   // Auto-update state field
  provider?: Provider,      // Per-agent provider override
})
```

## runReactive Configuration

```typescript
runReactive({
  // Required
  agents: Record<string, Agent>,
  state: TState,
  provider: Provider,

  // Optional
  endWhen?: (state: TState) => boolean,
  recording?: {
    mode: "record" | "replay",
    store: SignalStore,
    recordingId?: string,    // Required for replay
    name?: string,           // Recording name
    tags?: string[],         // Recording tags
  },
  reducers?: Record<string, Reducer>,
})
```

## Result Shape

```typescript
interface HarnessResult<TState> {
  state: TState;              // Final state
  signals: Signal[];          // Full signal trace
  metrics: {
    durationMs: number;       // Execution time
    activations: number;      // Agent activation count
  };
  terminatedEarly: boolean;   // endWhen triggered
  recordingId?: string;       // If recording
}
```
