---
title: Development Workflow
description: How to make changes to Open Harness
---

# Development Workflow

This guide covers the day-to-day workflow for contributing to Open Harness.

## Branch Strategy

### Feature Branches

Create branches for your work:

```bash
# Create feature branch from main
git checkout main
git pull
git checkout -b feature/add-websocket-channel
```

### Branch Naming

Use descriptive prefixes:

- `feature/` - New features
- `fix/` - Bug fixes
- `docs/` - Documentation changes
- `refactor/` - Code refactoring
- `test/` - Test additions

### Graphite Stacks

For complex features, use Graphite stacks:

```bash
# Create stacked PRs
gt create -m "feat: add channel interface"
gt create -m "feat: implement channel"
gt create -m "test: add channel tests"
```

Stacks help review large changes incrementally.

## Making Changes

### 1. Create Branch

```bash
git checkout -b fix/binding-resolution
```

### 2. Make Changes

Edit files, following conventions:
- TypeScript strict mode
- No implicit `any`
- Zod schemas for validation

### 3. Run Checks

```bash
# Type checking
bun run typecheck

# Unit tests
bun run test

# Specific test file
bun test tests/unit/bindings.test.ts
```

### 4. Commit

Use conventional commits:

```bash
git add .
git commit -m "fix: resolve bindings for nested arrays

The binding resolver now correctly handles array indices
in nested paths like 'items.0.name'.

Fixes #123"
```

### 5. Push

```bash
git push -u origin fix/binding-resolution
```

## Commit Message Format

Follow [Conventional Commits](https://www.conventionalcommits.org/):

```
type(scope): subject

body (optional)

footer (optional)
```

### Types

| Type | Purpose |
|------|---------|
| `feat` | New feature |
| `fix` | Bug fix |
| `docs` | Documentation |
| `style` | Formatting |
| `refactor` | Code restructuring |
| `test` | Adding tests |
| `chore` | Maintenance |

### Examples

```
feat(flow): add retry policy support

Nodes can now specify retry behavior:
- maxAttempts
- backoffMs

Closes #45
```

```
fix(hub): prevent listener errors from breaking emission

Wrap listener calls in try-catch to isolate failures.
```

```
docs: update binding syntax reference
```

## Code Review

### Creating a PR

Include:
1. **Title**: Clear, follows commit format
2. **Description**: What and why
3. **Testing**: How you tested
4. **Related**: Links to issues

### PR Template

```markdown
## What

Brief description of changes.

## Why

Motivation for the change.

## Testing

How this was tested:
- [ ] Unit tests added
- [ ] Manual testing done
- [ ] Existing tests pass

## Related

Closes #123
```

### Reviewer Expectations

Reviewers check:
- Code correctness
- Test coverage
- Documentation
- Type safety
- Naming conventions

### Responding to Feedback

- Address all comments
- Explain if you disagree
- Re-request review when ready

## Merging

### Requirements

Before merge:
- All checks pass
- At least one approval
- No unresolved comments

### Squash Policy

PRs are squashed on merge:
- One commit per PR in main
- Clean history

### Merge Commit Message

The PR title becomes the commit message. Make titles descriptive.

## Local Development Tips

### Watch Mode

```bash
# Run tests in watch mode
bun test --watch

# Type check continuously
bun run typecheck --watch
```

### Debugging

```bash
# Run with debug output
DEBUG=* bun run packages/kernel/examples/basic.ts

# Inspect specific module
DEBUG=hub:* bun test
```

### Quick Iterations

```bash
# Run single test file
bun test tests/unit/bindings.test.ts

# Run tests matching pattern
bun test -t "resolves nested"
```

## Common Tasks

### Adding a Test

1. Create test file mirroring source:
   ```
   src/flow/bindings.ts â†’ tests/unit/bindings.test.ts
   ```

2. Write test:
   ```typescript
   import { test, expect } from "bun:test";
   import { resolveBindings } from "../../src/flow/bindings";

   test("resolves simple path", () => {
     const result = resolveBindings(...);
     expect(result).toEqual(...);
   });
   ```

3. Run:
   ```bash
   bun test tests/unit/bindings.test.ts
   ```

### Updating Documentation

1. Find doc file in `apps/docs/content/`
2. Edit MDX content
3. Preview locally:
   ```bash
   cd apps/docs
   bun run dev
   ```

### Adding a Feature

1. Read relevant specs in `packages/kernel/docs/`
2. Write tests first (TDD)
3. Implement feature
4. Update documentation
5. Create PR

## Next Steps

- [Testing](/docs/contributing/development/testing) - Test strategy
- [Fixtures](/docs/contributing/development/fixtures) - Recording fixtures
- [Conformance](/docs/contributing/development/conformance) - Conformance testing
